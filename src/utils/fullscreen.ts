export function enableFullscreenFeature(topBar) {
  const fullscreenButton = document.createElement("button");
  fullscreenButton.id = "fullscreenButton";
  fullscreenButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.77778 14.2222H3.55555C3.8074 14.2222 4.01866 14.3075 4.18933 14.4782C4.36 14.6489 4.44503 14.8598 4.44444 15.1111C4.44385 15.3624 4.35852 15.5736 4.18844 15.7449C4.01837 15.9161 3.8074 16.0012 3.55555 16H0.888888C0.637037 16 0.426074 15.9147 0.256 15.744C0.085926 15.5733 0.000592592 15.3624 0 15.1111V12.4444C0 12.1926 0.0853334 11.9816 0.256 11.8115C0.426666 11.6415 0.637629 11.5561 0.888888 11.5555C1.14015 11.555 1.35141 11.6403 1.52267 11.8115C1.69392 11.9828 1.77896 12.1938 1.77778 12.4444V14.2222ZM14.2222 14.2222V12.4444C14.2222 12.1926 14.3075 11.9816 14.4782 11.8115C14.6489 11.6415 14.8598 11.5561 15.1111 11.5555C15.3624 11.555 15.5736 11.6403 15.7449 11.8115C15.9161 11.9828 16.0012 12.1938 16 12.4444V15.1111C16 15.363 15.9147 15.5742 15.744 15.7449C15.5733 15.9155 15.3624 16.0006 15.1111 16H12.4444C12.1926 16 11.9816 15.9147 11.8115 15.744C11.6415 15.5733 11.5561 15.3624 11.5555 15.1111C11.555 14.8598 11.6403 14.6489 11.8115 14.4782C11.9828 14.3075 12.1938 14.2222 12.4444 14.2222H14.2222ZM1.77778 1.77778V3.55555C1.77778 3.8074 1.69244 4.01866 1.52178 4.18933C1.35111 4.36 1.14015 4.44503 0.888888 4.44444C0.637629 4.44385 0.426666 4.35852 0.256 4.18844C0.0853334 4.01837 0 3.8074 0 3.55555V0.888888C0 0.637037 0.0853334 0.426074 0.256 0.256C0.426666 0.085926 0.637629 0.000592592 0.888888 0H3.55555C3.8074 0 4.01866 0.0853334 4.18933 0.256C4.36 0.426666 4.44503 0.637629 4.44444 0.888888C4.44385 1.14015 4.35852 1.35141 4.18844 1.52267C4.01837 1.69392 3.8074 1.77896 3.55555 1.77778H1.77778ZM14.2222 1.77778H12.4444C12.1926 1.77778 11.9816 1.69244 11.8115 1.52178C11.6415 1.35111 11.5561 1.14015 11.5555 0.888888C11.555 0.637629 11.6403 0.426666 11.8115 0.256C11.9828 0.0853334 12.1938 0 12.4444 0H15.1111C15.363 0 15.5742 0.0853334 15.7449 0.256C15.9155 0.426666 16.0006 0.637629 16 0.888888V3.55555C16 3.8074 15.9147 4.01866 15.744 4.18933C15.5733 4.36 15.3624 4.44503 15.1111 4.44444C14.8598 4.44385 14.6489 4.35852 14.4782 4.18844C14.3075 4.01837 14.2222 3.8074 14.2222 3.55555V1.77778Z" fill="#6D6D6D"/>
            </svg>`;

  topBar.appendChild(fullscreenButton);

  fullscreenButton.addEventListener("click", () => {
    if (!document.fullscreenElement) {
      document.documentElement
        .requestFullscreen()
        .then(() => {
          fullscreenButton.innerHTML = `<svg id="close" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15.5735 2.42596C15.7068 2.29689 15.8132 2.14246 15.8864 1.9717C15.9597 1.80095 15.9982 1.61727 15.9999 1.43139C16.0016 1.24552 15.9664 1.06116 15.8963 0.889084C15.8262 0.717008 15.7227 0.560657 15.5917 0.429155C15.4608 0.297653 15.305 0.193632 15.1335 0.123162C14.9621 0.0526925 14.7783 0.0171858 14.593 0.0187128C14.4077 0.0202398 14.2246 0.0587703 14.0543 0.132056C13.884 0.205342 13.73 0.311916 13.6012 0.445559L8.0079 6.05452L2.4165 0.445559C2.28874 0.30802 2.13468 0.197703 1.9635 0.12119C1.79231 0.0446766 1.60752 0.0035343 1.42014 0.000217862C1.23276 -0.00309858 1.04664 0.0314789 0.872874 0.101887C0.699106 0.172295 0.541256 0.277091 0.40874 0.410024C0.276223 0.542956 0.171755 0.701301 0.101568 0.875614C0.0313803 1.04993 -0.00308888 1.23664 0.00021718 1.4246C0.00352324 1.61257 0.0445368 1.79794 0.12081 1.96966C0.197084 2.14138 0.307055 2.29593 0.444164 2.42409L6.03184 8.03492L0.440443 13.6439C0.193938 13.9093 0.0597379 14.2603 0.0661168 14.6229C0.0724956 14.9856 0.218955 15.3316 0.474639 15.5881C0.730323 15.8446 1.07527 15.9915 1.4368 15.9979C1.79834 16.0043 2.14824 15.8697 2.41278 15.6224L8.0079 10.0135L13.5993 15.6243C13.8638 15.8716 14.2137 16.0062 14.5753 15.9998C14.9368 15.9934 15.2818 15.8465 15.5374 15.59C15.7931 15.3335 15.9396 14.9875 15.946 14.6248C15.9523 14.2621 15.8181 13.9111 15.5716 13.6457L9.98396 8.03492L15.5735 2.42596Z" fill="#F1F1FA"/>
      </svg>`;
        })
        .catch((err) => {
          console.error(
            `Erreur lors de l'activation du mode plein écran: ${err}`,
          );
        });
    } else {
      document
        .exitFullscreen()
        .then(() => {
          fullscreenButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.77778 14.2222H3.55555C3.8074 14.2222 4.01866 14.3075 4.18933 14.4782C4.36 14.6489 4.44503 14.8598 4.44444 15.1111C4.44385 15.3624 4.35852 15.5736 4.18844 15.7449C4.01837 15.9161 3.8074 16.0012 3.55555 16H0.888888C0.637037 16 0.426074 15.9147 0.256 15.744C0.085926 15.5733 0.000592592 15.3624 0 15.1111V12.4444C0 12.1926 0.0853334 11.9816 0.256 11.8115C0.426666 11.6415 0.637629 11.5561 0.888888 11.5555C1.14015 11.555 1.35141 11.6403 1.52267 11.8115C1.69392 11.9828 1.77896 12.1938 1.77778 12.4444V14.2222ZM14.2222 14.2222V12.4444C14.2222 12.1926 14.3075 11.9816 14.4782 11.8115C14.6489 11.6415 14.8598 11.5561 15.1111 11.5555C15.3624 11.555 15.5736 11.6403 15.7449 11.8115C15.9161 11.9828 16.0012 12.1938 16 12.4444V15.1111C16 15.363 15.9147 15.5742 15.744 15.7449C15.5733 15.9155 15.3624 16.0006 15.1111 16H12.4444C12.1926 16 11.9816 15.9147 11.8115 15.744C11.6415 15.5733 11.5561 15.3624 11.5555 15.1111C11.555 14.8598 11.6403 14.6489 11.8115 14.4782C11.9828 14.3075 12.1938 14.2222 12.4444 14.2222H14.2222ZM1.77778 1.77778V3.55555C1.77778 3.8074 1.69244 4.01866 1.52178 4.18933C1.35111 4.36 1.14015 4.44503 0.888888 4.44444C0.637629 4.44385 0.426666 4.35852 0.256 4.18844C0.0853334 4.01837 0 3.8074 0 3.55555V0.888888C0 0.637037 0.0853334 0.426074 0.256 0.256C0.426666 0.085926 0.637629 0.000592592 0.888888 0H3.55555C3.8074 0 4.01866 0.0853334 4.18933 0.256C4.36 0.426666 4.44503 0.637629 4.44444 0.888888C4.44385 1.14015 4.35852 1.35141 4.18844 1.52267C4.01837 1.69392 3.8074 1.77896 3.55555 1.77778H1.77778ZM14.2222 1.77778H12.4444C12.1926 1.77778 11.9816 1.69244 11.8115 1.52178C11.6415 1.35111 11.5561 1.14015 11.5555 0.888888C11.555 0.637629 11.6403 0.426666 11.8115 0.256C11.9828 0.0853334 12.1938 0 12.4444 0H15.1111C15.363 0 15.5742 0.0853334 15.7449 0.256C15.9155 0.426666 16.0006 0.637629 16 0.888888V3.55555C16 3.8074 15.9147 4.01866 15.744 4.18933C15.5733 4.36 15.3624 4.44503 15.1111 4.44444C14.8598 4.44385 14.6489 4.35852 14.4782 4.18844C14.3075 4.01837 14.2222 3.8074 14.2222 3.55555V1.77778Z" fill="#6D6D6D"/>
            </svg>`;
        })
        .catch((err) => {
          console.error(`Erreur lors de la sortie du mode plein écran: ${err}`);
        });
    }
  });

  // Met à jour l'icône du bouton lorsque l'utilisateur entre ou sort du mode plein écran
  document.addEventListener("fullscreenchange", () => {
    if (document.fullscreenElement) {
      fullscreenButton.innerHTML = `<svg id="close" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M15.5735 2.42596C15.7068 2.29689 15.8132 2.14246 15.8864 1.9717C15.9597 1.80095 15.9982 1.61727 15.9999 1.43139C16.0016 1.24552 15.9664 1.06116 15.8963 0.889084C15.8262 0.717008 15.7227 0.560657 15.5917 0.429155C15.4608 0.297653 15.305 0.193632 15.1335 0.123162C14.9621 0.0526925 14.7783 0.0171858 14.593 0.0187128C14.4077 0.0202398 14.2246 0.0587703 14.0543 0.132056C13.884 0.205342 13.73 0.311916 13.6012 0.445559L8.0079 6.05452L2.4165 0.445559C2.28874 0.30802 2.13468 0.197703 1.9635 0.12119C1.79231 0.0446766 1.60752 0.0035343 1.42014 0.000217862C1.23276 -0.00309858 1.04664 0.0314789 0.872874 0.101887C0.699106 0.172295 0.541256 0.277091 0.40874 0.410024C0.276223 0.542956 0.171755 0.701301 0.101568 0.875614C0.0313803 1.04993 -0.00308888 1.23664 0.00021718 1.4246C0.00352324 1.61257 0.0445368 1.79794 0.12081 1.96966C0.197084 2.14138 0.307055 2.29593 0.444164 2.42409L6.03184 8.03492L0.440443 13.6439C0.193938 13.9093 0.0597379 14.2603 0.0661168 14.6229C0.0724956 14.9856 0.218955 15.3316 0.474639 15.5881C0.730323 15.8446 1.07527 15.9915 1.4368 15.9979C1.79834 16.0043 2.14824 15.8697 2.41278 15.6224L8.0079 10.0135L13.5993 15.6243C13.8638 15.8716 14.2137 16.0062 14.5753 15.9998C14.9368 15.9934 15.2818 15.8465 15.5374 15.59C15.7931 15.3335 15.9396 14.9875 15.946 14.6248C15.9523 14.2621 15.8181 13.9111 15.5716 13.6457L9.98396 8.03492L15.5735 2.42596Z" fill="#F1F1FA"/>
      </svg>`; // Icône "Quitter plein écran"
    } else {
      fullscreenButton.innerHTML = `<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1.77778 14.2222H3.55555C3.8074 14.2222 4.01866 14.3075 4.18933 14.4782C4.36 14.6489 4.44503 14.8598 4.44444 15.1111C4.44385 15.3624 4.35852 15.5736 4.18844 15.7449C4.01837 15.9161 3.8074 16.0012 3.55555 16H0.888888C0.637037 16 0.426074 15.9147 0.256 15.744C0.085926 15.5733 0.000592592 15.3624 0 15.1111V12.4444C0 12.1926 0.0853334 11.9816 0.256 11.8115C0.426666 11.6415 0.637629 11.5561 0.888888 11.5555C1.14015 11.555 1.35141 11.6403 1.52267 11.8115C1.69392 11.9828 1.77896 12.1938 1.77778 12.4444V14.2222ZM14.2222 14.2222V12.4444C14.2222 12.1926 14.3075 11.9816 14.4782 11.8115C14.6489 11.6415 14.8598 11.5561 15.1111 11.5555C15.3624 11.555 15.5736 11.6403 15.7449 11.8115C15.9161 11.9828 16.0012 12.1938 16 12.4444V15.1111C16 15.363 15.9147 15.5742 15.744 15.7449C15.5733 15.9155 15.3624 16.0006 15.1111 16H12.4444C12.1926 16 11.9816 15.9147 11.8115 15.744C11.6415 15.5733 11.5561 15.3624 11.5555 15.1111C11.555 14.8598 11.6403 14.6489 11.8115 14.4782C11.9828 14.3075 12.1938 14.2222 12.4444 14.2222H14.2222ZM1.77778 1.77778V3.55555C1.77778 3.8074 1.69244 4.01866 1.52178 4.18933C1.35111 4.36 1.14015 4.44503 0.888888 4.44444C0.637629 4.44385 0.426666 4.35852 0.256 4.18844C0.0853334 4.01837 0 3.8074 0 3.55555V0.888888C0 0.637037 0.0853334 0.426074 0.256 0.256C0.426666 0.085926 0.637629 0.000592592 0.888888 0H3.55555C3.8074 0 4.01866 0.0853334 4.18933 0.256C4.36 0.426666 4.44503 0.637629 4.44444 0.888888C4.44385 1.14015 4.35852 1.35141 4.18844 1.52267C4.01837 1.69392 3.8074 1.77896 3.55555 1.77778H1.77778ZM14.2222 1.77778H12.4444C12.1926 1.77778 11.9816 1.69244 11.8115 1.52178C11.6415 1.35111 11.5561 1.14015 11.5555 0.888888C11.555 0.637629 11.6403 0.426666 11.8115 0.256C11.9828 0.0853334 12.1938 0 12.4444 0H15.1111C15.363 0 15.5742 0.0853334 15.7449 0.256C15.9155 0.426666 16.0006 0.637629 16 0.888888V3.55555C16 3.8074 15.9147 4.01866 15.744 4.18933C15.5733 4.36 15.3624 4.44503 15.1111 4.44444C14.8598 4.44385 14.6489 4.35852 14.4782 4.18844C14.3075 4.01837 14.2222 3.8074 14.2222 3.55555V1.77778Z" fill="#6D6D6D"/>
            </svg>`; // Icône "Plein écran"
    }
  });
}